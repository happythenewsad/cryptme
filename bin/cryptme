#!/usr/bin/env ruby

require 'cryptme'

# bootstrap parser ###
usage = "Usage: cryptme <path> \n If the given path is not a cryptme file, a new one will be created."
if ARGV.length != 1
  puts usage 
  exit 
end
######################


cryptme = Melon::Utils.new(path: ARGV.first)
cryptme.persist

Melon::REPLParser.cryptme = cryptme

puts Melon::REPLParser.usage

loop do 
  putc '>'
  inp = $stdin.gets.chomp
  options = Melon::REPLParser.parse inp.split(' ')
end
